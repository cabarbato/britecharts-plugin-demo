{"version":3,"sources":["reducers/categoryReducer.tsx","reducers/rootReducer.tsx","store/store.js","components/AppHeader.tsx","components/AppNav.tsx","actions/actions.tsx","components/ChartGraph.tsx","containers/AppChart.tsx","assets/data/data.csv","containers/App.tsx","index.tsx"],"names":["SET_CATEGORY","GET_CATEGORIES","initialState","category","categories","categoryReducer","state","action","type","Object","assign","payload","combineReducers","createStore","rootReducer","window","__REDUX_DEVTOOLS_EXTENSION__","AppHeader","Row","Col","xs","sm","className","connect","dispatch","onSetCategory","e","props","React","useState","md","DropdownButton","variant","title","length","onSelect","Dropdown","Item","eventKey","map","d","i","row_category","process","formatData","data","skip_keys","entries","entry","includes","push","ChartGraph","height","margin","top","bottom","left","right","yAxisPaddingBetweenChart","betweenBarsPadding","colorSchema","colors","colorSchemas","britecharts","pymChild","pym","label","AppChart","onPageClick","page","selected","offset","per_page","setState","getCategories","page_count","displayed","reset","this","o","filter","slice","Math","ceil","sendHeight","next_props","previousLabel","nextLabel","breakLabel","breakClassName","marginPagesDisplayed","pageRangeDisplayed","onPageChange","containerClassName","subContainerClassName","activeClassName","pageCount","as","href","Component","App","d3","then","onGetCategories","Container","fluid","ReactDOM","render","store","document","getElementById"],"mappings":"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","file":"static/js/main.9eaa1ac2.chunk.js","sourcesContent":["const SET_CATEGORY = 'SET_CATEGORY';\nconst GET_CATEGORIES = 'GET_CATEGORIES';\nconst initialState = {\n    category: \"\",\n    categories: []\n};\n\nconst categoryReducer = (state = initialState, action) => {\n    switch (action.type) {\n        case SET_CATEGORY:\n            return Object.assign({}, state, { category: action.payload });\n        case GET_CATEGORIES:\n            return Object.assign({}, state, { categories: action.payload });\n        default:\n            return state;\n    }\n};\n\nexport default categoryReducer;\n","import { combineReducers } from 'redux';\nimport categoryReducer from './categoryReducer';\n\nexport default combineReducers({\n  categoryReducer\n});\n","import { createStore } from 'redux';\nimport rootReducer from '../reducers/rootReducer';\n\nexport default createStore(rootReducer,\n    window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__());\n","import React from 'react';\nimport { Row, Col } from 'react-bootstrap';\n\nconst AppHeader: React.FC = () => {\n  return (\n    <header>\n      <Row>\n        <Col xs={12} sm={9} className=\"header-title mx-auto\">\n          <h1>Britecharts React Plugin Demo</h1>\n          <p>Move your cursor over the chart to see data for each category</p>\n        </Col>\n      </Row>\n    </header>\n  );\n}\n\nexport default AppHeader;","import React from 'react';\nimport { Row, Col, DropdownButton, Dropdown } from 'react-bootstrap';\nimport { connect } from 'react-redux';\nimport { setCategory } from '../actions/actions';\n\ntype NavProps = {\n  category,\n  categories,\n  onSetCategory\n};\n\nconst placeholder = 'Select a category',\n  mapStateToProps = state => ({\n    category: state.categoryReducer.category,\n    categories: state.categoryReducer.categories\n  }),\n  mapDispatchToProps = dispatch => ({\n    onSetCategory: (e) => dispatch(setCategory(e))\n  });\n\nconst AppNav: React.FC<NavProps> = (props) => {\n  const {\n    category,\n    categories,\n    onSetCategory\n  } = props;\n  const [value, setValue] = React.useState('');\n  const handleSelect = (e) => {\n    console.log(e);\n    setValue(e)\n  }\n  return (\n    <nav>\n      <Row>\n        <Col xs={12} sm={8} md={6} className=\"mx-auto\">\n          <DropdownButton variant=\"secondary\" title={category.length ? category : placeholder} onSelect={e => onSetCategory(e)}>\n            <Dropdown.Item eventKey=\"\">Any</Dropdown.Item>\n            {categories.map((d, i) => {\n              const row_category = d[process.env.REACT_APP_SAMPLE_CATEGORY];\n              return <Dropdown.Item key={i} eventKey={row_category}>{row_category}</Dropdown.Item>\n\n            })\n            }\n          </DropdownButton>\n        </Col>\n      </Row>\n    </nav>\n  );\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AppNav);","export const\n  setCategory = (payload: string) => ({ type: 'SET_CATEGORY', payload }),\n  getCategories = (payload: object[]) => ({ type: 'GET_CATEGORIES', payload });","import React from 'react';\nimport { Bar } from 'britecharts-react';\nimport { colors } from 'britecharts';\n\ntype GraphProps = {\n    data\n  };\n  \nconst formatData = (d) => {\n        const data = [],\n            skip_keys = [process.env.REACT_APP_SAMPLE_CATEGORY, process.env.REACT_APP_SAMPLE_LABEL],\n            entries = Object.entries(d);\n        for (const entry of entries) {\n            if (!skip_keys.includes(entry[0])) data.push({\n                \"name\": entry[0],\n                \"value\": +entry[1]\n            })\n        }\n        return data\n    };\n    \nconst ChartGraph: React.FC<GraphProps> = ({data}) => {\n    return  <Bar\n        data={formatData(data)}\n        height={56}\n        margin={{ top: 0, bottom: 0, left: -10, right: 0 }}\n        yAxisPaddingBetweenChart={0}\n        betweenBarsPadding={0}\n        colorSchema={colors.colorSchemas.britecharts}\n    />\n}\nexport default ChartGraph;","import React from 'react';\nimport { connect } from 'react-redux';\nimport { Row, Col } from 'react-bootstrap';\nimport * as pym from \"pym.js\";\nimport ReactPaginate from 'react-paginate';\nimport ChartGraph from '../components/ChartGraph';\n\ntype ChartProps = {\n    category,\n    categories\n  };\ntype ChartState = {\n    data: object[],\n    category: string,\n    page: number,\n    offset: number,\n    per_page: number,\n    page_count: number\n    displayed: unknown\n  };\n\nconst pymChild = new pym.Child(),\n  label = process.env.REACT_APP_SAMPLE_LABEL,\n  mapStateToProps = state => ({\n    category: state.categoryReducer.category,\n    categories: state.categoryReducer.categories\n  });\n\nclass AppChart extends React.Component<ChartProps, ChartState> {\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: [],\n      category: props.category,\n      page: 0,\n      offset: 0,\n      per_page: 3,\n      page_count: 0,\n      displayed: <></>\n    }\n  }\n  getCategories(reset) {\n    const { category, categories } = this.props,\n      { per_page, offset } = this.state,\n      o = reset ? 0: offset,\n      data = category.length ? categories.filter(d => category == d[process.env.REACT_APP_SAMPLE_CATEGORY]) : categories,\n      slice = data.slice(o, o + per_page),\n      displayed = slice.map((d, i) => <div className=\"chart\" key={i}>\n        <Row className=\"chart-category align-items-center\">\n          <Col sm={8}>\n            <h3>{d[process.env.REACT_APP_SAMPLE_CATEGORY]}</h3>\n          </Col>\n          {!i &&\n            <Col sm={4}>\n              <p className=\"d-none d-sm-block\">{label}</p>\n            </Col>\n          }\n        </Row>\n        <Row className=\"chart-data align-items-center\">\n          <Col sm={9} className=\"chart-data__graph\">\n            <ChartGraph data={d} />\n          </Col>\n          <Col sm={3} className=\"chart-data__percent text-center d-flex d-sm-block align-items-center mb-3 mb-sm-0\">\n            <p className=\"chart-data__percent-label d-sm-none my-0 mx-3\">{label}:</p>\n            <p className=\"chart-data__percent-data flex-fill\">{d[label]}</p>\n          </Col>\n        </Row>\n      </div>)\n\n    this.setState({\n      category,\n      page_count: Math.ceil(data.length / per_page),\n      displayed\n    })\n  }\n  onPageClick = (e) => {\n    const page = e.selected;\n    const offset = page * this.state.per_page;\n\n    this.setState({\n      page,\n      offset\n    }, () => {\n      this.getCategories(false)\n    });\n  }\n  componentDidMount() {\n    this.getCategories(false);\n    pymChild.sendHeight();\n  }\n  componentDidUpdate() {\n    pymChild.sendHeight();\n  }\n  shouldComponentUpdate(next_props) {\n    if (next_props.category != this.state.category) this.getCategories(true)\n    return true;\n  }\n  render() {\n    const { displayed, page_count } = this.state;\n\n    return !displayed ? <></> : <main>\n      {displayed}\n      <Row>\n        <Col className=\"d-flex justify-content-center\">\n          <ReactPaginate\n            previousLabel={<><i className=\"fas fa-angle-left\"></i> Prev</>}\n            nextLabel={<>Next <i className=\"fas fa-angle-right\"></i></>}\n            breakLabel={\"...\"}\n            breakClassName={\"break-me\"}\n            marginPagesDisplayed={1}\n            pageRangeDisplayed={3}\n            onPageChange={this.onPageClick}\n            containerClassName={\"pagination\"}\n            subContainerClassName={\"pages pagination\"}\n            activeClassName={\"active\"}\n            pageCount={page_count} />\n        </Col>\n      </Row>\n      <Row as=\"footer\">\n        <Col>\n          <p>Shameless Plug: <a href=\"https://github.com/cabarbato\">github.com/cabarbato</a></p>\n        </Col>\n      </Row>\n    </main>\n      ;\n  }\n}\n\nexport default connect(mapStateToProps)(AppChart);","export default __webpack_public_path__ + \"static/media/data.f4870092.csv\";","import React from 'react';\nimport { Container } from 'react-bootstrap';\nimport * as d3 from 'd3';\nimport { connect } from 'react-redux';\nimport { getCategories } from '../actions/actions';\nimport AppHeader from '../components/AppHeader';\nimport AppNav from '../components/AppNav';\nimport AppChart from './AppChart';\nimport * as data from '../assets/data/data.csv';\n\ntype AppProps = {\n  categories,\n  onGetCategories\n};\n\nconst mapStateToProps = state => ({\n    categories: state.categoryReducer.categories\n  }),\n  mapDispatchToProps = dispatch => ({\n    onGetCategories: (e) => (dispatch(getCategories(e)))\n  });\n\nclass App extends React.Component<AppProps> {\n  constructor(props) {\n    super(props)\n\n    d3.csv(data.default)\n      .then(d => props.onGetCategories(d));\n  }\n  render() {\n    const { categories } = this.props;\n    return (\n      <Container fluid>\n        <AppHeader />\n        {categories.length ?\n          <>\n            <AppNav />\n            <AppChart />\n          </> :\n          <></>}\n      </Container>\n    );\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport store from './store/store';\nimport './assets/scss/main.scss';\nimport App from './containers/App';\n\nReactDOM.render(\n  <Provider store={store}><App /></Provider>,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}